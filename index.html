<!DOCTYPE html>
<html>
    <head>
        <title>Start Paperspace machine</title>
        <meta charset="UTF-8">
        <style>
            body {
                background-color: white;
            }
            #main {
                color: black;
                font-family: Arial, Helvetica, sans-serif;
                font-weight: bold;
                font-size: 3em;
                text-align: center;
                padding: 200px 0;
            }
        </style>
        
        <body>
            <button onclick="sendPaperspace('/start')">Start Machine</button>
            <button onclick="sendPaperspace('/stop')">Shutdown Machine</button>
            <button onclick="sendPaperspace('/restart')">Restart Machine</button>
        </body>

        <script type="text/javascript">
            "use strict";     
            
            var machineId = '<insert here>';
            var apiKey = '<insert here>';
            
            function sendPaperspace(action)
            {   
                var response = "";
                if (machineId && apiKey)
                {
                    var url = 'https://api.paperspace.io/machines/' + machineId + action;
                    var xhr = new XMLHttpRequest();
                    xhr.open("POST", url, true);
                    xhr.setRequestHeader("x-api-key", apiKey);
                    xhr.onreadystatechange = function() {
                        if(xhr.readyState == XMLHttpRequest.DONE && xhr.status == 204) {
                            response = '✅ - Machine ' + machineId + ' was successfully started.';
                        }
                        else
                        {
                            response = '❌ - Machine ' + machineId + ' could not be started.';
                        }
                        document.getElementById('main').innerHTML = response;
                    }
                    xhr.send(); 
                }
            }   
        </script>
    </head>
</html>
